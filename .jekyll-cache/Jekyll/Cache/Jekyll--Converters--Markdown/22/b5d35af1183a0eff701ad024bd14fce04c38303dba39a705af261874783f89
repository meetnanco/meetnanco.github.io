I":¹<h1 id="è®¡ç®—æœºæ“ä½œç³»ç»Ÿ---è¿›ç¨‹ç®¡ç†">è®¡ç®—æœºæ“ä½œç³»ç»Ÿ - è¿›ç¨‹ç®¡ç†</h1>
<!-- GFM-TOC -->
<ul>
  <li><a href="#è®¡ç®—æœºæ“ä½œç³»ç»Ÿ---è¿›ç¨‹ç®¡ç†">è®¡ç®—æœºæ“ä½œç³»ç»Ÿ - è¿›ç¨‹ç®¡ç†</a>
    <ul>
      <li><a href="#è¿›ç¨‹ä¸çº¿ç¨‹">è¿›ç¨‹ä¸çº¿ç¨‹</a>
        <ul>
          <li><a href="#1-è¿›ç¨‹">1. è¿›ç¨‹</a></li>
          <li><a href="#2-çº¿ç¨‹">2. çº¿ç¨‹</a></li>
          <li><a href="#3-åŒºåˆ«">3. åŒºåˆ«</a></li>
        </ul>
      </li>
      <li><a href="#è¿›ç¨‹çŠ¶æ€çš„åˆ‡æ¢">è¿›ç¨‹çŠ¶æ€çš„åˆ‡æ¢</a></li>
      <li><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•">è¿›ç¨‹è°ƒåº¦ç®—æ³•</a>
        <ul>
          <li><a href="#1-æ‰¹å¤„ç†ç³»ç»Ÿ">1. æ‰¹å¤„ç†ç³»ç»Ÿ</a></li>
          <li><a href="#2-äº¤äº’å¼ç³»ç»Ÿ">2. äº¤äº’å¼ç³»ç»Ÿ</a></li>
          <li><a href="#3-å®æ—¶ç³»ç»Ÿ">3. å®æ—¶ç³»ç»Ÿ</a></li>
        </ul>
      </li>
      <li><a href="#è¿›ç¨‹åŒæ­¥">è¿›ç¨‹åŒæ­¥</a>
        <ul>
          <li><a href="#1-ä¸´ç•ŒåŒº">1. ä¸´ç•ŒåŒº</a></li>
          <li><a href="#2-åŒæ­¥ä¸äº’æ–¥">2. åŒæ­¥ä¸äº’æ–¥</a></li>
          <li><a href="#3-ä¿¡å·é‡">3. ä¿¡å·é‡</a></li>
          <li><a href="#4-ç®¡ç¨‹">4. ç®¡ç¨‹</a></li>
        </ul>
      </li>
      <li><a href="#ç»å…¸åŒæ­¥é—®é¢˜">ç»å…¸åŒæ­¥é—®é¢˜</a>
        <ul>
          <li><a href="#1-å“²å­¦å®¶è¿›é¤é—®é¢˜">1. å“²å­¦å®¶è¿›é¤é—®é¢˜</a></li>
          <li><a href="#2-è¯»è€…-å†™è€…é—®é¢˜">2. è¯»è€…-å†™è€…é—®é¢˜</a></li>
        </ul>
      </li>
      <li><a href="#è¿›ç¨‹é€šä¿¡">è¿›ç¨‹é€šä¿¡</a>
        <ul>
          <li><a href="#1-ç®¡é“">1. ç®¡é“</a></li>
          <li><a href="#2-fifo">2. FIFO</a></li>
          <li><a href="#3-æ¶ˆæ¯é˜Ÿåˆ—">3. æ¶ˆæ¯é˜Ÿåˆ—</a></li>
          <li><a href="#4-ä¿¡å·é‡">4. ä¿¡å·é‡</a></li>
          <li><a href="#5-å…±äº«å­˜å‚¨">5. å…±äº«å­˜å‚¨</a></li>
          <li><a href="#6-å¥—æ¥å­—">6. å¥—æ¥å­—</a>
<!-- GFM-TOC --></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="è¿›ç¨‹ä¸çº¿ç¨‹">è¿›ç¨‹ä¸çº¿ç¨‹</h2>

<h3 id="1-è¿›ç¨‹">1. è¿›ç¨‹</h3>

<p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚</p>

<p>è¿›ç¨‹æ§åˆ¶å— (Process Control Block, PCB) æè¿°è¿›ç¨‹çš„åŸºæœ¬ä¿¡æ¯å’Œè¿è¡ŒçŠ¶æ€ï¼Œæ‰€è°“çš„åˆ›å»ºè¿›ç¨‹å’Œæ’¤é”€è¿›ç¨‹ï¼Œéƒ½æ˜¯æŒ‡å¯¹ PCB çš„æ“ä½œã€‚</p>

<p>ä¸‹å›¾æ˜¾ç¤ºäº† 4 ä¸ªç¨‹åºåˆ›å»ºäº† 4 ä¸ªè¿›ç¨‹ï¼Œè¿™ 4 ä¸ªè¿›ç¨‹å¯ä»¥å¹¶å‘åœ°æ‰§è¡Œã€‚</p>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a6ac2b08-3861-4e85-baa8-382287bfee9f.png" /> </div>
<p><br /></p>

<h3 id="2-çº¿ç¨‹">2. çº¿ç¨‹</h3>

<p>çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚</p>

<p>ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬å…±äº«è¿›ç¨‹èµ„æºã€‚</p>

<p>QQ å’Œæµè§ˆå™¨æ˜¯ä¸¤ä¸ªè¿›ç¨‹ï¼Œæµè§ˆå™¨è¿›ç¨‹é‡Œé¢æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œä¾‹å¦‚ HTTP è¯·æ±‚çº¿ç¨‹ã€äº‹ä»¶å“åº”çº¿ç¨‹ã€æ¸²æŸ“çº¿ç¨‹ç­‰ç­‰ï¼Œçº¿ç¨‹çš„å¹¶å‘æ‰§è¡Œä½¿å¾—åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»ä¸€ä¸ªæ–°é“¾æ¥ä»è€Œå‘èµ· HTTP è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨è¿˜å¯ä»¥å“åº”ç”¨æˆ·çš„å…¶å®ƒäº‹ä»¶ã€‚</p>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/3cd630ea-017c-488d-ad1d-732b4efeddf5.png" /> </div>
<p><br /></p>

<h3 id="3-åŒºåˆ«">3. åŒºåˆ«</h3>

<p>â…  æ‹¥æœ‰èµ„æº</p>

<p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä½†æ˜¯çº¿ç¨‹ä¸æ‹¥æœ‰èµ„æºï¼Œçº¿ç¨‹å¯ä»¥è®¿é—®éš¶å±è¿›ç¨‹çš„èµ„æºã€‚</p>

<p>â…¡ è°ƒåº¦</p>

<p>çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œåœ¨åŒä¸€è¿›ç¨‹ä¸­ï¼Œçº¿ç¨‹çš„åˆ‡æ¢ä¸ä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢ï¼Œä»ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹æ—¶ï¼Œä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢ã€‚</p>

<p>â…¢ ç³»ç»Ÿå¼€é”€</p>

<p>ç”±äºåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶èµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ã€I/O è®¾å¤‡ç­‰ï¼Œæ‰€ä»˜å‡ºçš„å¼€é”€è¿œå¤§äºåˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨è¿›è¡Œè¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œæ¶‰åŠå½“å‰æ‰§è¡Œè¿›ç¨‹ CPU ç¯å¢ƒçš„ä¿å­˜åŠæ–°è°ƒåº¦è¿›ç¨‹ CPU ç¯å¢ƒçš„è®¾ç½®ï¼Œè€Œçº¿ç¨‹åˆ‡æ¢æ—¶åªéœ€ä¿å­˜å’Œè®¾ç½®å°‘é‡å¯„å­˜å™¨å†…å®¹ï¼Œå¼€é”€å¾ˆå°ã€‚</p>

<p>â…£ é€šä¿¡æ–¹é¢</p>

<p>çº¿ç¨‹é—´å¯ä»¥é€šè¿‡ç›´æ¥è¯»å†™åŒä¸€è¿›ç¨‹ä¸­çš„æ•°æ®è¿›è¡Œé€šä¿¡ï¼Œä½†æ˜¯è¿›ç¨‹é€šä¿¡éœ€è¦å€ŸåŠ© IPCã€‚</p>

<h2 id="è¿›ç¨‹çŠ¶æ€çš„åˆ‡æ¢">è¿›ç¨‹çŠ¶æ€çš„åˆ‡æ¢</h2>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/ProcessState.png" width="500" /> </div>
<p><br /></p>

<ul>
  <li>å°±ç»ªçŠ¶æ€ï¼ˆreadyï¼‰ï¼šç­‰å¾…è¢«è°ƒåº¦</li>
  <li>è¿è¡ŒçŠ¶æ€ï¼ˆrunningï¼‰</li>
  <li>é˜»å¡çŠ¶æ€ï¼ˆwaitingï¼‰ï¼šç­‰å¾…èµ„æº</li>
</ul>

<p>åº”è¯¥æ³¨æ„ä»¥ä¸‹å†…å®¹ï¼š</p>

<ul>
  <li>åªæœ‰å°±ç»ªæ€å’Œè¿è¡Œæ€å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œå…¶å®ƒçš„éƒ½æ˜¯å•å‘è½¬æ¢ã€‚å°±ç»ªçŠ¶æ€çš„è¿›ç¨‹é€šè¿‡è°ƒåº¦ç®—æ³•ä»è€Œè·å¾— CPU æ—¶é—´ï¼Œè½¬ä¸ºè¿è¡ŒçŠ¶æ€ï¼›è€Œè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹ï¼Œåœ¨åˆ†é…ç»™å®ƒçš„ CPU æ—¶é—´ç‰‡ç”¨å®Œä¹‹åå°±ä¼šè½¬ä¸ºå°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒåº¦ã€‚</li>
  <li>é˜»å¡çŠ¶æ€æ˜¯ç¼ºå°‘éœ€è¦çš„èµ„æºä»è€Œç”±è¿è¡ŒçŠ¶æ€è½¬æ¢è€Œæ¥ï¼Œä½†æ˜¯è¯¥èµ„æºä¸åŒ…æ‹¬ CPU æ—¶é—´ï¼Œç¼ºå°‘ CPU æ—¶é—´ä¼šä»è¿è¡Œæ€è½¬æ¢ä¸ºå°±ç»ªæ€ã€‚</li>
</ul>

<h2 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•">è¿›ç¨‹è°ƒåº¦ç®—æ³•</h2>

<p>ä¸åŒç¯å¢ƒçš„è°ƒåº¦ç®—æ³•ç›®æ ‡ä¸åŒï¼Œå› æ­¤éœ€è¦é’ˆå¯¹ä¸åŒç¯å¢ƒæ¥è®¨è®ºè°ƒåº¦ç®—æ³•ã€‚</p>

<h3 id="1-æ‰¹å¤„ç†ç³»ç»Ÿ">1. æ‰¹å¤„ç†ç³»ç»Ÿ</h3>

<p>æ‰¹å¤„ç†ç³»ç»Ÿæ²¡æœ‰å¤ªå¤šçš„ç”¨æˆ·æ“ä½œï¼Œåœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œè°ƒåº¦ç®—æ³•ç›®æ ‡æ˜¯ä¿è¯ååé‡å’Œå‘¨è½¬æ—¶é—´ï¼ˆä»æäº¤åˆ°ç»ˆæ­¢çš„æ—¶é—´ï¼‰ã€‚</p>

<p><strong>1.1 å…ˆæ¥å…ˆæœåŠ¡ first-come first-serverdï¼ˆFCFSï¼‰</strong></p>

<p>éæŠ¢å å¼çš„è°ƒåº¦ç®—æ³•ï¼ŒæŒ‰ç…§è¯·æ±‚çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚</p>

<p>æœ‰åˆ©äºé•¿ä½œä¸šï¼Œä½†ä¸åˆ©äºçŸ­ä½œä¸šï¼Œå› ä¸ºçŸ­ä½œä¸šå¿…é¡»ä¸€ç›´ç­‰å¾…å‰é¢çš„é•¿ä½œä¸šæ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œï¼Œè€Œé•¿ä½œä¸šåˆéœ€è¦æ‰§è¡Œå¾ˆé•¿æ—¶é—´ï¼Œé€ æˆäº†çŸ­ä½œä¸šç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚</p>

<p><strong>1.2 çŸ­ä½œä¸šä¼˜å…ˆ shortest job firstï¼ˆSJFï¼‰</strong></p>

<p>éæŠ¢å å¼çš„è°ƒåº¦ç®—æ³•ï¼ŒæŒ‰ä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚</p>

<p>é•¿ä½œä¸šæœ‰å¯èƒ½ä¼šé¥¿æ­»ï¼Œå¤„äºä¸€ç›´ç­‰å¾…çŸ­ä½œä¸šæ‰§è¡Œå®Œæ¯•çš„çŠ¶æ€ã€‚å› ä¸ºå¦‚æœä¸€ç›´æœ‰çŸ­ä½œä¸šåˆ°æ¥ï¼Œé‚£ä¹ˆé•¿ä½œä¸šæ°¸è¿œå¾—ä¸åˆ°è°ƒåº¦ã€‚</p>

<p><strong>1.3 æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ shortest remaining time nextï¼ˆSRTNï¼‰</strong></p>

<p>æœ€çŸ­ä½œä¸šä¼˜å…ˆçš„æŠ¢å å¼ç‰ˆæœ¬ï¼ŒæŒ‰å‰©ä½™è¿è¡Œæ—¶é—´çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚ å½“ä¸€ä¸ªæ–°çš„ä½œä¸šåˆ°è¾¾æ—¶ï¼Œå…¶æ•´ä¸ªè¿è¡Œæ—¶é—´ä¸å½“å‰è¿›ç¨‹çš„å‰©ä½™æ—¶é—´ä½œæ¯”è¾ƒã€‚å¦‚æœæ–°çš„è¿›ç¨‹éœ€è¦çš„æ—¶é—´æ›´å°‘ï¼Œåˆ™æŒ‚èµ·å½“å‰è¿›ç¨‹ï¼Œè¿è¡Œæ–°çš„è¿›ç¨‹ã€‚å¦åˆ™æ–°çš„è¿›ç¨‹ç­‰å¾…ã€‚</p>

<h3 id="2-äº¤äº’å¼ç³»ç»Ÿ">2. äº¤äº’å¼ç³»ç»Ÿ</h3>

<p>äº¤äº’å¼ç³»ç»Ÿæœ‰å¤§é‡çš„ç”¨æˆ·äº¤äº’æ“ä½œï¼Œåœ¨è¯¥ç³»ç»Ÿä¸­è°ƒåº¦ç®—æ³•çš„ç›®æ ‡æ˜¯å¿«é€Ÿåœ°è¿›è¡Œå“åº”ã€‚</p>

<p><strong>2.1 æ—¶é—´ç‰‡è½®è½¬</strong></p>

<p>å°†æ‰€æœ‰å°±ç»ªè¿›ç¨‹æŒ‰ FCFS çš„åŸåˆ™æ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯æ¬¡è°ƒåº¦æ—¶ï¼ŒæŠŠ CPU æ—¶é—´åˆ†é…ç»™é˜Ÿé¦–è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹å¯ä»¥æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ã€‚å½“æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œç”±è®¡æ—¶å™¨å‘å‡ºæ—¶é’Ÿä¸­æ–­ï¼Œè°ƒåº¦ç¨‹åºä¾¿åœæ­¢è¯¥è¿›ç¨‹çš„æ‰§è¡Œï¼Œå¹¶å°†å®ƒé€å¾€å°±ç»ªé˜Ÿåˆ—çš„æœ«å°¾ï¼ŒåŒæ—¶ç»§ç»­æŠŠ CPU æ—¶é—´åˆ†é…ç»™é˜Ÿé¦–çš„è¿›ç¨‹ã€‚</p>

<p>æ—¶é—´ç‰‡è½®è½¬ç®—æ³•çš„æ•ˆç‡å’Œæ—¶é—´ç‰‡çš„å¤§å°æœ‰å¾ˆå¤§å…³ç³»ï¼š</p>

<ul>
  <li>å› ä¸ºè¿›ç¨‹åˆ‡æ¢éƒ½è¦ä¿å­˜è¿›ç¨‹çš„ä¿¡æ¯å¹¶ä¸”è½½å…¥æ–°è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå¦‚æœæ—¶é—´ç‰‡å¤ªå°ï¼Œä¼šå¯¼è‡´è¿›ç¨‹åˆ‡æ¢å¾—å¤ªé¢‘ç¹ï¼Œåœ¨è¿›ç¨‹åˆ‡æ¢ä¸Šå°±ä¼šèŠ±è¿‡å¤šæ—¶é—´ã€‚</li>
  <li>è€Œå¦‚æœæ—¶é—´ç‰‡è¿‡é•¿ï¼Œé‚£ä¹ˆå®æ—¶æ€§å°±ä¸èƒ½å¾—åˆ°ä¿è¯ã€‚</li>
</ul>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/8c662999-c16c-481c-9f40-1fdba5bc9167.png" /> </div>
<p><br /></p>

<p><strong>2.2 ä¼˜å…ˆçº§è°ƒåº¦</strong></p>

<p>ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ï¼ŒæŒ‰ä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦ã€‚</p>

<p>ä¸ºäº†é˜²æ­¢ä½ä¼˜å…ˆçº§çš„è¿›ç¨‹æ°¸è¿œç­‰ä¸åˆ°è°ƒåº¦ï¼Œå¯ä»¥éšç€æ—¶é—´çš„æ¨ç§»å¢åŠ ç­‰å¾…è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p>

<p><strong>2.3 å¤šçº§åé¦ˆé˜Ÿåˆ—</strong></p>

<p>ä¸€ä¸ªè¿›ç¨‹éœ€è¦æ‰§è¡Œ 100 ä¸ªæ—¶é—´ç‰‡ï¼Œå¦‚æœé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼Œé‚£ä¹ˆéœ€è¦äº¤æ¢ 100 æ¬¡ã€‚</p>

<p>å¤šçº§é˜Ÿåˆ—æ˜¯ä¸ºè¿™ç§éœ€è¦è¿ç»­æ‰§è¡Œå¤šä¸ªæ—¶é—´ç‰‡çš„è¿›ç¨‹è€ƒè™‘ï¼Œå®ƒè®¾ç½®äº†å¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—æ—¶é—´ç‰‡å¤§å°éƒ½ä¸åŒï¼Œä¾‹å¦‚ 1,2,4,8,..ã€‚è¿›ç¨‹åœ¨ç¬¬ä¸€ä¸ªé˜Ÿåˆ—æ²¡æ‰§è¡Œå®Œï¼Œå°±ä¼šè¢«ç§»åˆ°ä¸‹ä¸€ä¸ªé˜Ÿåˆ—ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œä¹‹å‰çš„è¿›ç¨‹åªéœ€è¦äº¤æ¢ 7 æ¬¡ã€‚</p>

<p>æ¯ä¸ªé˜Ÿåˆ—ä¼˜å…ˆæƒä¹Ÿä¸åŒï¼Œæœ€ä¸Šé¢çš„ä¼˜å…ˆæƒæœ€é«˜ã€‚å› æ­¤åªæœ‰ä¸Šä¸€ä¸ªé˜Ÿåˆ—æ²¡æœ‰è¿›ç¨‹åœ¨æ’é˜Ÿï¼Œæ‰èƒ½è°ƒåº¦å½“å‰é˜Ÿåˆ—ä¸Šçš„è¿›ç¨‹ã€‚</p>

<p>å¯ä»¥å°†è¿™ç§è°ƒåº¦ç®—æ³•çœ‹æˆæ˜¯æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•å’Œä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•çš„ç»“åˆã€‚</p>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/042cf928-3c8e-4815-ae9c-f2780202c68f.png" /> </div>
<p><br /></p>

<h3 id="3-å®æ—¶ç³»ç»Ÿ">3. å®æ—¶ç³»ç»Ÿ</h3>

<p>å®æ—¶ç³»ç»Ÿè¦æ±‚ä¸€ä¸ªè¯·æ±‚åœ¨ä¸€ä¸ªç¡®å®šæ—¶é—´å†…å¾—åˆ°å“åº”ã€‚</p>

<p>åˆ†ä¸ºç¡¬å®æ—¶å’Œè½¯å®æ—¶ï¼Œå‰è€…å¿…é¡»æ»¡è¶³ç»å¯¹çš„æˆªæ­¢æ—¶é—´ï¼Œåè€…å¯ä»¥å®¹å¿ä¸€å®šçš„è¶…æ—¶ã€‚</p>

<h2 id="è¿›ç¨‹åŒæ­¥">è¿›ç¨‹åŒæ­¥</h2>

<h3 id="1-ä¸´ç•ŒåŒº">1. ä¸´ç•ŒåŒº</h3>

<p>å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®çš„é‚£æ®µä»£ç ç§°ä¸ºä¸´ç•ŒåŒºã€‚</p>

<p>ä¸ºäº†äº’æ–¥è®¿é—®ä¸´ç•Œèµ„æºï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œæ£€æŸ¥ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// entry section
// critical section;
// exit section
</code></pre></div></div>

<h3 id="2-åŒæ­¥ä¸äº’æ–¥">2. åŒæ­¥ä¸äº’æ–¥</h3>

<ul>
  <li>åŒæ­¥ï¼šå¤šä¸ªè¿›ç¨‹å› ä¸ºåˆä½œäº§ç”Ÿçš„ç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œä½¿å¾—è¿›ç¨‹æœ‰ä¸€å®šçš„å…ˆåæ‰§è¡Œå…³ç³»ã€‚</li>
  <li>äº’æ–¥ï¼šå¤šä¸ªè¿›ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚</li>
</ul>

<h3 id="3-ä¿¡å·é‡">3. ä¿¡å·é‡</h3>

<p>ä¿¡å·é‡ï¼ˆSemaphoreï¼‰æ˜¯ä¸€ä¸ªæ•´å‹å˜é‡ï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œ down å’Œ up æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¸¸è§çš„ P å’Œ V æ“ä½œã€‚</p>

<ul>
  <li><strong>down</strong>   : å¦‚æœä¿¡å·é‡å¤§äº 0 ï¼Œæ‰§è¡Œ -1 æ“ä½œï¼›å¦‚æœä¿¡å·é‡ç­‰äº 0ï¼Œè¿›ç¨‹ç¡çœ ï¼Œç­‰å¾…ä¿¡å·é‡å¤§äº 0ï¼›</li>
  <li><strong>up</strong>  ï¼šå¯¹ä¿¡å·é‡æ‰§è¡Œ +1 æ“ä½œï¼Œå”¤é†’ç¡çœ çš„è¿›ç¨‹è®©å…¶å®Œæˆ down æ“ä½œã€‚</li>
</ul>

<p>down å’Œ up æ“ä½œéœ€è¦è¢«è®¾è®¡æˆåŸè¯­ï¼Œä¸å¯åˆ†å‰²ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨æ‰§è¡Œè¿™äº›æ“ä½œçš„æ—¶å€™å±è”½ä¸­æ–­ã€‚</p>

<p>å¦‚æœä¿¡å·é‡çš„å–å€¼åªèƒ½ä¸º 0 æˆ–è€… 1ï¼Œé‚£ä¹ˆå°±æˆä¸ºäº†   <strong>äº’æ–¥é‡ï¼ˆMutexï¼‰</strong>  ï¼Œ0 è¡¨ç¤ºä¸´ç•ŒåŒºå·²ç»åŠ é”ï¼Œ1 è¡¨ç¤ºä¸´ç•ŒåŒºè§£é”ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="kt">int</span> <span class="n">semaphore</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">mutex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">P1</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="c1">// ä¸´ç•ŒåŒº</span>
    <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">P2</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="c1">// ä¸´ç•ŒåŒº</span>
    <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>&lt;font size=3&gt;   <strong>ä½¿ç”¨ä¿¡å·é‡å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</strong>   &lt;/font&gt; &lt;/br&gt;</p>

<p>é—®é¢˜æè¿°ï¼šä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºæ¥ä¿å­˜ç‰©å“ï¼Œåªæœ‰ç¼“å†²åŒºæ²¡æœ‰æ»¡ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼›åªæœ‰ç¼“å†²åŒºä¸ä¸ºç©ºï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥æ‹¿èµ°ç‰©å“ã€‚</p>

<p>å› ä¸ºç¼“å†²åŒºå±äºä¸´ç•Œèµ„æºï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ä¸€ä¸ªäº’æ–¥é‡ mutex æ¥æ§åˆ¶å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®ã€‚</p>

<p>ä¸ºäº†åŒæ­¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¡Œä¸ºï¼Œéœ€è¦è®°å½•ç¼“å†²åŒºä¸­ç‰©å“çš„æ•°é‡ã€‚æ•°é‡å¯ä»¥ä½¿ç”¨ä¿¡å·é‡æ¥è¿›è¡Œç»Ÿè®¡ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ªä¿¡å·é‡ï¼šempty è®°å½•ç©ºç¼“å†²åŒºçš„æ•°é‡ï¼Œfull è®°å½•æ»¡ç¼“å†²åŒºçš„æ•°é‡ã€‚å…¶ä¸­ï¼Œempty ä¿¡å·é‡æ˜¯åœ¨ç”Ÿäº§è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ empty ä¸ä¸º 0 æ—¶ï¼Œç”Ÿäº§è€…æ‰å¯ä»¥æ”¾å…¥ç‰©å“ï¼›full ä¿¡å·é‡æ˜¯åœ¨æ¶ˆè´¹è€…è¿›ç¨‹ä¸­ä½¿ç”¨ï¼Œå½“ full ä¿¡å·é‡ä¸ä¸º 0 æ—¶ï¼Œæ¶ˆè´¹è€…æ‰å¯ä»¥å–èµ°ç‰©å“ã€‚</p>

<p>æ³¨æ„ï¼Œä¸èƒ½å…ˆå¯¹ç¼“å†²åŒºè¿›è¡ŒåŠ é”ï¼Œå†æµ‹è¯•ä¿¡å·é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½å…ˆæ‰§è¡Œ down(mutex) å†æ‰§è¡Œ down(empty)ã€‚å¦‚æœè¿™ä¹ˆåšäº†ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”åï¼Œæ‰§è¡Œ down(empty) æ“ä½œï¼Œå‘ç° empty = 0ï¼Œæ­¤æ—¶ç”Ÿäº§è€…ç¡çœ ã€‚æ¶ˆè´¹è€…ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºï¼Œå› ä¸ºç”Ÿäº§è€…å¯¹ç¼“å†²åŒºåŠ é”äº†ï¼Œæ¶ˆè´¹è€…å°±æ— æ³•æ‰§è¡Œ up(empty) æ“ä½œï¼Œempty æ°¸è¿œéƒ½ä¸º 0ï¼Œå¯¼è‡´ç”Ÿäº§è€…æ°¸è¿œç­‰å¾…ä¸‹ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œæ¶ˆè´¹è€…å› æ­¤ä¹Ÿä¼šæ°¸è¿œç­‰å¾…ä¸‹å»ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define N 100
</span><span class="k">typedef</span> <span class="kt">int</span> <span class="n">semaphore</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">mutex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">empty</span> <span class="o">=</span> <span class="n">N</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">full</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">producer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">item</span> <span class="o">=</span> <span class="n">produce_item</span><span class="p">();</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty</span><span class="p">);</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
        <span class="n">insert_item</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">full</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">consumer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">full</span><span class="p">);</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">item</span> <span class="o">=</span> <span class="n">remove_item</span><span class="p">();</span>
        <span class="n">consume_item</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">empty</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="4-ç®¡ç¨‹">4. ç®¡ç¨‹</h3>

<p>ä½¿ç”¨ä¿¡å·é‡æœºåˆ¶å®ç°çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜éœ€è¦å®¢æˆ·ç«¯ä»£ç åšå¾ˆå¤šæ§åˆ¶ï¼Œè€Œç®¡ç¨‹æŠŠæ§åˆ¶çš„ä»£ç ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ä»…ä¸å®¹æ˜“å‡ºé”™ï¼Œä¹Ÿä½¿å¾—å®¢æˆ·ç«¯ä»£ç è°ƒç”¨æ›´å®¹æ˜“ã€‚</p>

<p>c è¯­è¨€ä¸æ”¯æŒç®¡ç¨‹ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä½¿ç”¨äº†ç±» Pascal è¯­è¨€æ¥æè¿°ç®¡ç¨‹ã€‚ç¤ºä¾‹ä»£ç çš„ç®¡ç¨‹æä¾›äº† insert() å’Œ remove() æ–¹æ³•ï¼Œå®¢æˆ·ç«¯ä»£ç é€šè¿‡è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ¥è§£å†³ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ã€‚</p>

<div class="language-pascal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">monitor</span> <span class="n">ProducerConsumer</span>
    <span class="kt">integer</span> <span class="n">i</span><span class="p">;</span>
    <span class="n">condition</span> <span class="n">c</span><span class="p">;</span>

    <span class="k">procedure</span> <span class="n">insert</span><span class="p">();</span>
    <span class="k">begin</span>
        <span class="c1">// ...
</span>    <span class="k">end</span><span class="p">;</span>

    <span class="k">procedure</span> <span class="n">remove</span><span class="p">();</span>
    <span class="k">begin</span>
        <span class="c1">// ...
</span>    <span class="k">end</span><span class="p">;</span>
<span class="k">end</span> <span class="n">monitor</span><span class="p">;</span>
</code></pre></div></div>

<p>ç®¡ç¨‹æœ‰ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šåœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ç®¡ç¨‹ã€‚è¿›ç¨‹åœ¨æ— æ³•ç»§ç»­æ‰§è¡Œçš„æ—¶å€™ä¸èƒ½ä¸€ç›´å ç”¨ç®¡ç¨‹ï¼Œå¦åˆ™å…¶å®ƒè¿›ç¨‹æ°¸è¿œä¸èƒ½ä½¿ç”¨ç®¡ç¨‹ã€‚</p>

<p>ç®¡ç¨‹å¼•å…¥äº†   <strong>æ¡ä»¶å˜é‡</strong>   ä»¥åŠç›¸å…³çš„æ“ä½œï¼š<strong>wait()</strong> å’Œ <strong>signal()</strong> æ¥å®ç°åŒæ­¥æ“ä½œã€‚å¯¹æ¡ä»¶å˜é‡æ‰§è¡Œ wait() æ“ä½œä¼šå¯¼è‡´è°ƒç”¨è¿›ç¨‹é˜»å¡ï¼ŒæŠŠç®¡ç¨‹è®©å‡ºæ¥ç»™å¦ä¸€ä¸ªè¿›ç¨‹æŒæœ‰ã€‚signal() æ“ä½œç”¨äºå”¤é†’è¢«é˜»å¡çš„è¿›ç¨‹ã€‚</p>

<font size="3">  **ä½¿ç”¨ç®¡ç¨‹å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜**  </font>
<p><br /></p>

<div class="language-pascal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ç®¡ç¨‹
</span><span class="n">monitor</span> <span class="n">ProducerConsumer</span>
    <span class="n">condition</span> <span class="n">full</span><span class="p">,</span> <span class="n">empty</span><span class="p">;</span>
    <span class="kt">integer</span> <span class="n">count</span> <span class="p">:=</span> <span class="m">0</span><span class="p">;</span>
    <span class="n">condition</span> <span class="n">c</span><span class="p">;</span>

    <span class="k">procedure</span> <span class="n">insert</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="kt">integer</span><span class="p">);</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="n">count</span> <span class="p">=</span> <span class="n">N</span> <span class="k">then</span> <span class="n">wait</span><span class="p">(</span><span class="n">full</span><span class="p">);</span>
        <span class="n">insert_item</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="n">count</span> <span class="p">:=</span> <span class="n">count</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="n">count</span> <span class="p">=</span> <span class="m">1</span> <span class="k">then</span> <span class="n">signal</span><span class="p">(</span><span class="n">empty</span><span class="p">);</span>
    <span class="k">end</span><span class="p">;</span>

    <span class="k">function</span> <span class="n">remove</span><span class="p">:</span> <span class="kt">integer</span><span class="p">;</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="n">count</span> <span class="p">=</span> <span class="m">0</span> <span class="k">then</span> <span class="n">wait</span><span class="p">(</span><span class="n">empty</span><span class="p">);</span>
        <span class="n">remove</span> <span class="p">=</span> <span class="n">remove_item</span><span class="p">;</span>
        <span class="n">count</span> <span class="p">:=</span> <span class="n">count</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="n">count</span> <span class="p">=</span> <span class="n">N</span> <span class="p">-</span><span class="m">1</span> <span class="k">then</span> <span class="n">signal</span><span class="p">(</span><span class="n">full</span><span class="p">);</span>
    <span class="k">end</span><span class="p">;</span>
<span class="k">end</span> <span class="n">monitor</span><span class="p">;</span>

<span class="c1">// ç”Ÿäº§è€…å®¢æˆ·ç«¯
</span><span class="k">procedure</span> <span class="n">producer</span>
<span class="k">begin</span>
    <span class="k">while</span> <span class="nb">true</span> <span class="k">do</span>
    <span class="k">begin</span>
        <span class="n">item</span> <span class="p">=</span> <span class="n">produce_item</span><span class="p">;</span>
        <span class="n">ProducerConsumer</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">;</span>

<span class="c1">// æ¶ˆè´¹è€…å®¢æˆ·ç«¯
</span><span class="k">procedure</span> <span class="n">consumer</span>
<span class="k">begin</span>
    <span class="k">while</span> <span class="nb">true</span> <span class="k">do</span>
    <span class="k">begin</span>
        <span class="n">item</span> <span class="p">=</span> <span class="n">ProducerConsumer</span><span class="p">.</span><span class="n">remove</span><span class="p">;</span>
        <span class="n">consume_item</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="ç»å…¸åŒæ­¥é—®é¢˜">ç»å…¸åŒæ­¥é—®é¢˜</h2>

<p>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é—®é¢˜å‰é¢å·²ç»è®¨è®ºè¿‡äº†ã€‚</p>

<h3 id="1-å“²å­¦å®¶è¿›é¤é—®é¢˜">1. å“²å­¦å®¶è¿›é¤é—®é¢˜</h3>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/a9077f06-7584-4f2b-8c20-3a8e46928820.jpg" /> </div>
<p><br /></p>

<p>äº”ä¸ªå“²å­¦å®¶å›´ç€ä¸€å¼ åœ†æ¡Œï¼Œæ¯ä¸ªå“²å­¦å®¶é¢å‰æ”¾ç€é£Ÿç‰©ã€‚å“²å­¦å®¶çš„ç”Ÿæ´»æœ‰ä¸¤ç§äº¤æ›¿æ´»åŠ¨ï¼šåƒé¥­ä»¥åŠæ€è€ƒã€‚å½“ä¸€ä¸ªå“²å­¦å®¶åƒé¥­æ—¶ï¼Œéœ€è¦å…ˆæ‹¿èµ·è‡ªå·±å·¦å³ä¸¤è¾¹çš„ä¸¤æ ¹ç­·å­ï¼Œå¹¶ä¸”ä¸€æ¬¡åªèƒ½æ‹¿èµ·ä¸€æ ¹ç­·å­ã€‚</p>

<p>ä¸‹é¢æ˜¯ä¸€ç§é”™è¯¯çš„è§£æ³•ï¼Œå¦‚æœæ‰€æœ‰å“²å­¦å®¶åŒæ—¶æ‹¿èµ·å·¦æ‰‹è¾¹çš„ç­·å­ï¼Œé‚£ä¹ˆæ‰€æœ‰å“²å­¦å®¶éƒ½åœ¨ç­‰å¾…å…¶å®ƒå“²å­¦å®¶åƒå®Œå¹¶é‡Šæ”¾è‡ªå·±æ‰‹ä¸­çš„ç­·å­ï¼Œå¯¼è‡´æ­»é”ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define N 5
</span>
<span class="kt">void</span> <span class="nf">philosopher</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">think</span><span class="p">();</span>
        <span class="n">take</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>       <span class="c1">// æ‹¿èµ·å·¦è¾¹çš„ç­·å­</span>
        <span class="n">take</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">N</span><span class="p">);</span> <span class="c1">// æ‹¿èµ·å³è¾¹çš„ç­·å­</span>
        <span class="n">eat</span><span class="p">();</span>
        <span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">put</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">N</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä¸ºäº†é˜²æ­¢æ­»é”çš„å‘ç”Ÿï¼Œå¯ä»¥è®¾ç½®ä¸¤ä¸ªæ¡ä»¶ï¼š</p>

<ul>
  <li>å¿…é¡»åŒæ—¶æ‹¿èµ·å·¦å³ä¸¤æ ¹ç­·å­ï¼›</li>
  <li>åªæœ‰åœ¨ä¸¤ä¸ªé‚»å±…éƒ½æ²¡æœ‰è¿›é¤çš„æƒ…å†µä¸‹æ‰å…è®¸è¿›é¤ã€‚</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define N 5
#define LEFT (i + N - 1) % N // å·¦é‚»å±…
#define RIGHT (i + 1) % N    // å³é‚»å±…
#define THINKING 0
#define HUNGRY   1
#define EATING   2
</span><span class="k">typedef</span> <span class="kt">int</span> <span class="n">semaphore</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">state</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>                <span class="c1">// è·Ÿè¸ªæ¯ä¸ªå“²å­¦å®¶çš„çŠ¶æ€</span>
<span class="n">semaphore</span> <span class="n">mutex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>         <span class="c1">// ä¸´ç•ŒåŒºçš„äº’æ–¥ï¼Œä¸´ç•ŒåŒºæ˜¯ state æ•°ç»„ï¼Œå¯¹å…¶ä¿®æ”¹éœ€è¦äº’æ–¥</span>
<span class="n">semaphore</span> <span class="n">s</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>              <span class="c1">// æ¯ä¸ªå“²å­¦å®¶ä¸€ä¸ªä¿¡å·é‡</span>

<span class="kt">void</span> <span class="nf">philosopher</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">think</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">take_two</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">eat</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">put_two</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">take_two</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">HUNGRY</span><span class="p">;</span>
    <span class="n">check</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span> <span class="c1">// åªæœ‰æ”¶åˆ°é€šçŸ¥ä¹‹åæ‰å¯ä»¥å¼€å§‹åƒï¼Œå¦åˆ™ä¼šä¸€ç›´ç­‰ä¸‹å»</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">put_two</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">THINKING</span><span class="p">;</span>
    <span class="n">check</span><span class="p">(</span><span class="n">LEFT</span><span class="p">);</span> <span class="c1">// å°è¯•é€šçŸ¥å·¦å³é‚»å±…ï¼Œè‡ªå·±åƒå®Œäº†ï¼Œä½ ä»¬å¯ä»¥å¼€å§‹åƒäº†</span>
    <span class="n">check</span><span class="p">(</span><span class="n">RIGHT</span><span class="p">);</span>
    <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">eat</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
    <span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">EATING</span><span class="p">;</span>
    <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// æ£€æŸ¥ä¸¤ä¸ªé‚»å±…æ˜¯å¦éƒ½æ²¡æœ‰ç”¨é¤ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°± up(&amp;s[i])ï¼Œä½¿å¾— down(&amp;s[i]) èƒ½å¤Ÿå¾—åˆ°é€šçŸ¥å¹¶ç»§ç»­æ‰§è¡Œ</span>
<span class="kt">void</span> <span class="nf">check</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>         
    <span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">HUNGRY</span> <span class="o">&amp;&amp;</span> <span class="n">state</span><span class="p">[</span><span class="n">LEFT</span><span class="p">]</span> <span class="o">!=</span> <span class="n">EATING</span> <span class="o">&amp;&amp;</span> <span class="n">state</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">]</span> <span class="o">!=</span><span class="n">EATING</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">EATING</span><span class="p">;</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-è¯»è€…-å†™è€…é—®é¢˜">2. è¯»è€…-å†™è€…é—®é¢˜</h3>

<p>å…è®¸å¤šä¸ªè¿›ç¨‹åŒæ—¶å¯¹æ•°æ®è¿›è¡Œè¯»æ“ä½œï¼Œä½†æ˜¯ä¸å…è®¸è¯»å’Œå†™ä»¥åŠå†™å’Œå†™æ“ä½œåŒæ—¶å‘ç”Ÿã€‚</p>

<p>ä¸€ä¸ªæ•´å‹å˜é‡ count è®°å½•åœ¨å¯¹æ•°æ®è¿›è¡Œè¯»æ“ä½œçš„è¿›ç¨‹æ•°é‡ï¼Œä¸€ä¸ªäº’æ–¥é‡ count_mutex ç”¨äºå¯¹ count åŠ é”ï¼Œä¸€ä¸ªäº’æ–¥é‡ data_mutex ç”¨äºå¯¹è¯»å†™çš„æ•°æ®åŠ é”ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="kt">int</span> <span class="n">semaphore</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">count_mutex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">semaphore</span> <span class="n">data_mutex</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">reader</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">count_mutex</span><span class="p">);</span>
        <span class="n">count</span><span class="o">++</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data_mutex</span><span class="p">);</span> <span class="c1">// ç¬¬ä¸€ä¸ªè¯»è€…éœ€è¦å¯¹æ•°æ®è¿›è¡ŒåŠ é”ï¼Œé˜²æ­¢å†™è¿›ç¨‹è®¿é—®</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">count_mutex</span><span class="p">);</span>
        <span class="n">read</span><span class="p">();</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">count_mutex</span><span class="p">);</span>
        <span class="n">count</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data_mutex</span><span class="p">);</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">count_mutex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">writer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data_mutex</span><span class="p">);</span>
        <span class="n">write</span><span class="p">();</span>
        <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data_mutex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä»¥ä¸‹å†…å®¹ç”± <a href="https://github.com/yugandharbandi">@Bandi Yugandhar</a> æä¾›ã€‚</p>

<p>The first case may result Writer to starve. This case favous Writers i.e no writer, once added to the queue, shall be kept waiting longer than absolutely necessary(only when there are readers that entered the queue before the writer).</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">readcount</span><span class="p">,</span> <span class="n">writecount</span><span class="p">;</span>                   <span class="c1">//(initial value = 0)</span>
<span class="n">semaphore</span> <span class="n">rmutex</span><span class="p">,</span> <span class="n">wmutex</span><span class="p">,</span> <span class="n">readLock</span><span class="p">,</span> <span class="n">resource</span><span class="p">;</span> <span class="c1">//(initial value = 1)</span>

<span class="c1">//READER</span>
<span class="kt">void</span> <span class="nf">reader</span><span class="p">()</span> <span class="p">{</span>
<span class="o">&lt;</span><span class="n">ENTRY</span> <span class="n">Section</span><span class="o">&gt;</span>
 <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readLock</span><span class="p">);</span>                 <span class="c1">//  reader is trying to enter</span>
 <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rmutex</span><span class="p">);</span>                  <span class="c1">//   lock to increase readcount</span>
  <span class="n">readcount</span><span class="o">++</span><span class="p">;</span>                 
  <span class="k">if</span> <span class="p">(</span><span class="n">readcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>          
   <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resource</span><span class="p">);</span>              <span class="c1">//if you are the first reader then lock  the resource</span>
 <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rmutex</span><span class="p">);</span>                  <span class="c1">//release  for other readers</span>
 <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readLock</span><span class="p">);</span>                 <span class="c1">//Done with trying to access the resource</span>

<span class="o">&lt;</span><span class="n">CRITICAL</span> <span class="n">Section</span><span class="o">&gt;</span>
<span class="c1">//reading is performed</span>

<span class="o">&lt;</span><span class="n">EXIT</span> <span class="n">Section</span><span class="o">&gt;</span>
 <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rmutex</span><span class="p">);</span>                  <span class="c1">//reserve exit section - avoids race condition with readers</span>
 <span class="n">readcount</span><span class="o">--</span><span class="p">;</span>                       <span class="c1">//indicate you're leaving</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">readcount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>          <span class="c1">//checks if you are last reader leaving</span>
   <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resource</span><span class="p">);</span>              <span class="c1">//if last, you must release the locked resource</span>
 <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rmutex</span><span class="p">);</span>                  <span class="c1">//release exit section for other readers</span>
<span class="p">}</span>

<span class="c1">//WRITER</span>
<span class="kt">void</span> <span class="nf">writer</span><span class="p">()</span> <span class="p">{</span>
  <span class="o">&lt;</span><span class="n">ENTRY</span> <span class="n">Section</span><span class="o">&gt;</span>
  <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wmutex</span><span class="p">);</span>                  <span class="c1">//reserve entry section for writers - avoids race conditions</span>
  <span class="n">writecount</span><span class="o">++</span><span class="p">;</span>                <span class="c1">//report yourself as a writer entering</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">writecount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>         <span class="c1">//checks if you're first writer</span>
   <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readLock</span><span class="p">);</span>               <span class="c1">//if you're first, then you must lock the readers out. Prevent them from trying to enter CS</span>
  <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wmutex</span><span class="p">);</span>                  <span class="c1">//release entry section</span>

<span class="o">&lt;</span><span class="n">CRITICAL</span> <span class="n">Section</span><span class="o">&gt;</span>
 <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resource</span><span class="p">);</span>                <span class="c1">//reserve the resource for yourself - prevents other writers from simultaneously editing the shared resource</span>
  <span class="c1">//writing is performed</span>
 <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">resource</span><span class="p">);</span>                <span class="c1">//release file</span>

<span class="o">&lt;</span><span class="n">EXIT</span> <span class="n">Section</span><span class="o">&gt;</span>
  <span class="n">down</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wmutex</span><span class="p">);</span>                  <span class="c1">//reserve exit section</span>
  <span class="n">writecount</span><span class="o">--</span><span class="p">;</span>                <span class="c1">//indicate you're leaving</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">writecount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>         <span class="c1">//checks if you're the last writer</span>
   <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readLock</span><span class="p">);</span>               <span class="c1">//if you're last writer, you must unlock the readers. Allows them to try enter CS for reading</span>
  <span class="n">up</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wmutex</span><span class="p">);</span>                  <span class="c1">//release exit section</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can observe that every reader is forced to acquire ReadLock. On the otherhand, writers doesnâ€™t need to lock individually. Once the first writer locks the ReadLock, it will be released only when there is no writer left in the queue.</p>

<p>From the both cases we observed that either reader or writer has to starve. Below solutionadds the constraint that no thread shall be allowed to starve; that is, the operation of obtaining a lock on the shared data will always terminate in a bounded amount of time.</p>

<pre><code class="language-source-c">int readCount;                  // init to 0; number of readers currently accessing resource

// all semaphores initialised to 1
Semaphore resourceAccess;       // controls access (read/write) to the resource
Semaphore readCountAccess;      // for syncing changes to shared variable readCount
Semaphore serviceQueue;         // FAIRNESS: preserves ordering of requests (signaling must be FIFO)

void writer()
{ 
    down(&amp;serviceQueue);           // wait in line to be servicexs
    // &lt;ENTER&gt;
    down(&amp;resourceAccess);         // request exclusive access to resource
    // &lt;/ENTER&gt;
    up(&amp;serviceQueue);           // let next in line be serviced

    // &lt;WRITE&gt;
    writeResource();            // writing is performed
    // &lt;/WRITE&gt;

    // &lt;EXIT&gt;
    up(&amp;resourceAccess);         // release resource access for next reader/writer
    // &lt;/EXIT&gt;
}

void reader()
{ 
    down(&amp;serviceQueue);           // wait in line to be serviced
    down(&amp;readCountAccess);        // request exclusive access to readCount
    // &lt;ENTER&gt;
    if (readCount == 0)         // if there are no readers already reading:
        down(&amp;resourceAccess);     // request resource access for readers (writers blocked)
    readCount++;                // update count of active readers
    // &lt;/ENTER&gt;
    up(&amp;serviceQueue);           // let next in line be serviced
    up(&amp;readCountAccess);        // release access to readCount

    // &lt;READ&gt;
    readResource();             // reading is performed
    // &lt;/READ&gt;

    down(&amp;readCountAccess);        // request exclusive access to readCount
    // &lt;EXIT&gt;
    readCount--;                // update count of active readers
    if (readCount == 0)         // if there are no readers left:
        up(&amp;resourceAccess);     // release resource access for all
    // &lt;/EXIT&gt;
    up(&amp;readCountAccess);        // release access to readCount
}

</code></pre>

<h2 id="è¿›ç¨‹é€šä¿¡">è¿›ç¨‹é€šä¿¡</h2>

<p>è¿›ç¨‹åŒæ­¥ä¸è¿›ç¨‹é€šä¿¡å¾ˆå®¹æ˜“æ··æ·†ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š</p>

<ul>
  <li>è¿›ç¨‹åŒæ­¥ï¼šæ§åˆ¶å¤šä¸ªè¿›ç¨‹æŒ‰ä¸€å®šé¡ºåºæ‰§è¡Œï¼›</li>
  <li>è¿›ç¨‹é€šä¿¡ï¼šè¿›ç¨‹é—´ä¼ è¾“ä¿¡æ¯ã€‚</li>
</ul>

<p>è¿›ç¨‹é€šä¿¡æ˜¯ä¸€ç§æ‰‹æ®µï¼Œè€Œè¿›ç¨‹åŒæ­¥æ˜¯ä¸€ç§ç›®çš„ã€‚ä¹Ÿå¯ä»¥è¯´ï¼Œä¸ºäº†èƒ½å¤Ÿè¾¾åˆ°è¿›ç¨‹åŒæ­¥çš„ç›®çš„ï¼Œéœ€è¦è®©è¿›ç¨‹è¿›è¡Œé€šä¿¡ï¼Œä¼ è¾“ä¸€äº›è¿›ç¨‹åŒæ­¥æ‰€éœ€è¦çš„ä¿¡æ¯ã€‚</p>

<h3 id="1-ç®¡é“">1. ç®¡é“</h3>

<p>ç®¡é“æ˜¯é€šè¿‡è°ƒç”¨ pipe å‡½æ•°åˆ›å»ºçš„ï¼Œfd[0] ç”¨äºè¯»ï¼Œfd[1] ç”¨äºå†™ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="nf">pipe</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</code></pre></div></div>

<p>å®ƒå…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>

<ul>
  <li>åªæ”¯æŒåŠåŒå·¥é€šä¿¡ï¼ˆå•å‘äº¤æ›¿ä¼ è¾“ï¼‰ï¼›</li>
  <li>åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¸­ä½¿ç”¨ã€‚</li>
</ul>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/53cd9ade-b0a6-4399-b4de-7f1fbd06cdfb.png" /> </div>
<p><br /></p>

<h3 id="2-fifo">2. FIFO</h3>

<p>ä¹Ÿç§°ä¸ºå‘½åç®¡é“ï¼Œå»é™¤äº†ç®¡é“åªèƒ½åœ¨çˆ¶å­è¿›ç¨‹ä¸­ä½¿ç”¨çš„é™åˆ¶ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;sys/stat.h&gt;</span><span class="cp">
</span><span class="kt">int</span> <span class="nf">mkfifo</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="n">mode_t</span> <span class="n">mode</span><span class="p">);</span>
<span class="kt">int</span> <span class="nf">mkfifoat</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">,</span> <span class="n">mode_t</span> <span class="n">mode</span><span class="p">);</span>
</code></pre></div></div>

<p>FIFO å¸¸ç”¨äºå®¢æˆ·-æœåŠ¡å™¨åº”ç”¨ç¨‹åºä¸­ï¼ŒFIFO ç”¨ä½œæ±‡èšç‚¹ï¼Œåœ¨å®¢æˆ·è¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p>

<div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2ac50b81-d92a-4401-b9ec-f2113ecc3076.png" /> </div>
<p><br /></p>

<h3 id="3-æ¶ˆæ¯é˜Ÿåˆ—">3. æ¶ˆæ¯é˜Ÿåˆ—</h3>

<p>ç›¸æ¯”äº FIFOï¼Œæ¶ˆæ¯é˜Ÿåˆ—å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>

<ul>
  <li>æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥ç‹¬ç«‹äºè¯»å†™è¿›ç¨‹å­˜åœ¨ï¼Œä»è€Œé¿å…äº† FIFO ä¸­åŒæ­¥ç®¡é“çš„æ‰“å¼€å’Œå…³é—­æ—¶å¯èƒ½äº§ç”Ÿçš„å›°éš¾ï¼›</li>
  <li>é¿å…äº† FIFO çš„åŒæ­¥é˜»å¡é—®é¢˜ï¼Œä¸éœ€è¦è¿›ç¨‹è‡ªå·±æä¾›åŒæ­¥æ–¹æ³•ï¼›</li>
  <li>è¯»è¿›ç¨‹å¯ä»¥æ ¹æ®æ¶ˆæ¯ç±»å‹æœ‰é€‰æ‹©åœ°æ¥æ”¶æ¶ˆæ¯ï¼Œè€Œä¸åƒ FIFO é‚£æ ·åªèƒ½é»˜è®¤åœ°æ¥æ”¶ã€‚</li>
</ul>

<h3 id="4-ä¿¡å·é‡">4. ä¿¡å·é‡</h3>

<p>å®ƒæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºä¸ºå¤šä¸ªè¿›ç¨‹æä¾›å¯¹å…±äº«æ•°æ®å¯¹è±¡çš„è®¿é—®ã€‚</p>

<h3 id="5-å…±äº«å­˜å‚¨">5. å…±äº«å­˜å‚¨</h3>

<p>å…è®¸å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªç»™å®šçš„å­˜å‚¨åŒºã€‚å› ä¸ºæ•°æ®ä¸éœ€è¦åœ¨è¿›ç¨‹ä¹‹é—´å¤åˆ¶ï¼Œæ‰€ä»¥è¿™æ˜¯æœ€å¿«çš„ä¸€ç§ IPCã€‚</p>

<p>éœ€è¦ä½¿ç”¨ä¿¡å·é‡ç”¨æ¥åŒæ­¥å¯¹å…±äº«å­˜å‚¨çš„è®¿é—®ã€‚</p>

<p>å¤šä¸ªè¿›ç¨‹å¯ä»¥å°†åŒä¸€ä¸ªæ–‡ä»¶æ˜ å°„åˆ°å®ƒä»¬çš„åœ°å€ç©ºé—´ä»è€Œå®ç°å…±äº«å†…å­˜ã€‚å¦å¤– XSI å…±äº«å†…å­˜ä¸æ˜¯ä½¿ç”¨æ–‡ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨å†…å­˜çš„åŒ¿åæ®µã€‚</p>

<h3 id="6-å¥—æ¥å­—">6. å¥—æ¥å­—</h3>

<p>ä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ç”¨äºä¸åŒæœºå™¨é—´çš„è¿›ç¨‹é€šä¿¡ã€‚</p>
:ET